<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CRM Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/dashboard.css" />

</head>

<body>
<!--//the fragment for header and sidbar-->
<div th:replace="headerAndNav :: headerAndNav"></div>
    <!-- Main Content -->
    <div class="container-fluid p-4">
        <h4 class="mb-4">Dashboard</h4>

        <div class="row g-4 mb-4">
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <a href="#" class="text-decoration-none">
                        <div class="card-body">
                            <h6>Welcome TO My CRM</h6>
                            <p class="mb-0 text-muted">CRM Dashboard</p>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <a href="#" class="text-decoration-none">
                        <div class="card-body">
                            <h6>Amount</h6>
                            <p class="mb-0 text-muted">Testing CRM</p>
                        </div>
                    </a>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <a href="#" class="text-decoration-none">
                        <div class="card-body">
                            <h6>Amount</h6>
                            <p class="mb-0 text-muted">Testing CRM 2</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h6>Sales / Revenue</h6>
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <h6>Daily Feed</h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis hic
                                at distinctio, qui ea blanditiis ex dolorem perspiciatis vel dignissimos officia a
                                modi? Voluptatum rerum dolores ipsum nobis beatae labore.</li>
                            <li class="mb-2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet saepe
                                suscipit minus beatae alias repudiandae eum, perspiciatis vel ipsum fugiat
                                blanditiis amet ipsa, voluptatibus assumenda voluptate, laborum deleniti nam quam?
                            </li>
                            <li>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Perspiciatis veritatis
                                asperiores non consequatur! provident?</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Chart.js Example
<!--    const ctx = document.getElementById('salesChart').getContext('2d');-->
<!--    new Chart(ctx, {-->
<!--      type: 'bar',-->
<!--      data: {-->
<!--        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],-->
<!--        datasets: [{-->
<!--          label: 'Sales',-->
<!--          data: [120, 140, 80, 100, 90, 100, 120, 130, 140, 160, 120, 140],-->
<!--          backgroundColor: '#0d6efd'-->
<!--        }]-->
<!--      },-->
<!--      options: {-->
<!--        responsive: true,-->
<!--        scales: {-->
<!--          y: { beginAtZero: true }-->
<!--        }-->
<!--      }-->
<!--    });-->
document.addEventListener('DOMContentLoaded', function () {
  const sidebar = document.getElementById('sidebar');
  const bsOffcanvas = new bootstrap.Offcanvas(sidebar);

  let lastSpaceTime = 0;
  let spacePressed = false;

  document.addEventListener('keydown', function (event) {
    if (event.key === ' ') {

      //  If focused element is input/textarea/contenteditable, do nothing
      const active = document.activeElement;
      const isTyping = active.tagName === 'INPUT' ||
                       active.tagName === 'TEXTAREA' ||
                       active.isContentEditable;

      if (isTyping) {
        // Let the normal space work
        return;
      }

      //  Else handle sidebar toggle
      event.preventDefault();
      const now = Date.now();
      if (spacePressed && (now - lastSpaceTime) < 400) {
        bsOffcanvas.show();
        spacePressed = false;
      } else {
        spacePressed = true;
        lastSpaceTime = now;
        setTimeout(() => {
          if (spacePressed) {
            bsOffcanvas.hide();
            spacePressed = false;
          }
        }, 400);
      }
    }
  });
});

<!--     const toggleLink = document.getElementById('servicesToggle');-->
<!--  const arrow = toggleLink.querySelector('.arrow');-->
<!--  const submenu = document.getElementById('servicesSubmenu');-->

<!--  submenu.addEventListener('shown.bs.collapse', () => {-->
<!--    arrow.innerHTML = '&gt;'; // > right arrow-->
<!--  });-->
<!--  submenu.addEventListener('hidden.bs.collapse', () => {-->
<!--    arrow.innerHTML = '&#x2304;'; // v down arrow-->
<!--  });-->
</script>

</body>
</html>
